{% extends 'base.html' %}
{% block pagetitle %}
Plant Disease Detection
{% endblock pagetitle %}
{% block body %}
<style>
  body{
    overflow-x: hidden;
  }
  @media only screen and (max-width: 830px) {
    .laptop{
      display: none;
    }
  }
  @media (min-width:830px) and (max-width: 1536px){
    .mobile{
      display: none;
    }
  }
</style>
<div class='mobile p-5'>
  <div class="row mb-5 text-center text-white">
    <div class="col-lg-10 mx-auto">
      <h1 class="display-4" style="padding-top: 2%;font-weight: 400;color:red;"><b>NoteâœğŸ»</b></h1>
      <p class="lead" style="font-weight: 500;color: black;">PleaseğŸ™ Open This Site On Laptop/PC ğŸ’» Screen Only</p>
      <p class="lead" style="font-weight: 500;color: black;">Thank You ğŸ¤</p>    
    </div>
</div>
</div>

<div class="row mb-5 text-center text-white laptop">
    <div class="col-lg-10 mx-auto">
        <h1 class="display-4" style="padding-top: 2%;font-weight: 400;color: rgb(4, 54, 4);"><b>ğŸPlant Disease
                DetectionğŸ </b></h1>
        <p class="lead" style="font-weight: 500;color: black;">This Help To Detect Disease in Tomato plant</p>
        {% if weather.error %}
        <p>{{ weather.error }}</p>
    {% else %}
        <h2>ğŸŒ¦ï¸ Weather in {{ weather.city }}</h2>
        <p>Temperature: {{ weather.temp }} Â°C</p>
        <p>Humidity: {{ weather.humidity }}%</p>
        <p>Condition: {{ weather.condition }}</p>
        <p><strong>{{ weather.alert }}</strong></p>
    {% endif %}
    

  </div>

    </div>
</div>

<center class="laptop">
    <a href="/index">
    <button class = "bttn-pill bttn-lg btn-success"><b style="color: black;">Navigate to upload image</b></button>
</a>
</center>
<div class="row p-5 laptop">
   
    <div class="col">
      <center>
        <div class="p-3 bg-white shadow rounded-lg" style="width: 33%;height: 92%;">

          <img src="https://images-prod.healthline.com/hlcmsresource/images/AN_images/tomatoes-1296x728-feature.jpg" width="250" height="250">
          <center><p class="lead" style="font-weight: 500;color: black;">Tomato</p></center>
        </div>
      </center>
    </div>

</div>
</center>

<!-- Floating Ask TomatoGenie button  
<div id="chatToggle" class="fixed bottom-4 right-4 bg-green-700 text-white px-6 py-3 rounded-full shadow-xl hover:bg-green-800 cursor-pointer z-50">
  ğŸ… Ask TomatoGenie
</div>
-->

<!-- Ask TomatoGenie Button (Navigates to chatanswer.html) -->
<button id="chatToggle" class="fixed bottom-4 right-4 bg-green-700 text-black px-6 py-3 rounded-full shadow-xl hover:bg-green-800 cursor-pointer z-50">
  ğŸ… Ask TomatoGenie
</button>

<script>
  // Redirect to chatanswer.html on button click
  document.getElementById('chatToggle').addEventListener('click', () => {
    window.location.href = '/genie';
  });
</script>


<!-- Chat Window -->
 <!--
<div id="chatBox" class="fixed bottom-20 right-4 w-96 bg-white border border-green-300 rounded-lg shadow-lg hidden flex flex-col z-50 transform translate-y-10 opacity-0 transition-all duration-500 ease-in-out">
  <div id="chatHeader" class="bg-green-600 text-white p-3 rounded-t-lg flex justify-between items-center cursor-pointer">
    <span>ğŸ… TomatoGenie</span>
    <button id="minimizeChat" class="text-white hover:text-red-200 text-lg">â–</button>
  </div>

  <div id="chatBody" class="flex flex-col h-80">
    <div id="chatMessages" class="p-3 flex-1 overflow-y-auto text-sm">
      <div class="text-gray-500">Hi! Iâ€™m TomatoGenie. Ask me anything about tomato plant care ğŸŒ±</div>
    </div>
    <form id="chatForm" class="flex p-2 border-t">
      <input id="userInput" name="prompt" type="text" class="flex-1 p-2 border border-green-300 rounded-l focus:outline-none" placeholder="Ask me...">
      <button class="bg-green-600 text-white px-4 rounded-r hover:bg-green-700">Send</button>
    </form>
  </div>
</div>

<script>
  const chatBox = document.getElementById('chatBox');
  const chatToggle = document.getElementById('chatToggle');
  const minimizeChat = document.getElementById('minimizeChat');
  const chatBody = document.getElementById('chatBody');
  const chatHeader = document.getElementById('chatHeader');

  // Open chat with animation
  chatToggle.addEventListener('click', () => {
    chatBox.classList.remove('hidden');
    setTimeout(() => {
      chatBox.classList.remove('translate-y-10', 'opacity-0');
      chatBox.classList.add('translate-y-0', 'opacity-100');
      chatBody.classList.remove('hidden');
      minimizeChat.textContent = 'â–';
    }, 50);
  });

  // Minimize/Expand toggle
  minimizeChat.addEventListener('click', (e) => {
    e.stopPropagation();
    const isHidden = chatBody.classList.toggle('hidden');
    minimizeChat.textContent = isHidden ? 'âœš' : 'â–';
  });

  // Toggle chat body when header is clicked
  chatHeader.addEventListener('click', () => {
    const isHidden = chatBody.classList.toggle('hidden');
    minimizeChat.textContent = isHidden ? 'âœš' : 'â–';
  });

  // Chat form submission
  document.getElementById('chatForm').addEventListener('submit', async function (e) {
    e.preventDefault();
    const input = document.getElementById('userInput');
    const message = input.value.trim();
    if (!message) return;

    const chatMessages = document.getElementById('chatMessages');
    chatMessages.innerHTML += `<div class="text-right text-green-800 my-2"><strong>You:</strong> ${message}</div>`;
    input.value = '';

    const res = await fetch('/chat', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ prompt: message })
    });

    const data = await res.json();
    chatMessages.innerHTML += `<div class="text-left text-gray-700 my-2"><strong>TomatoGenie:</strong> ${data.reply}</div>`;
    chatMessages.scrollTop = chatMessages.scrollHeight;
  });
</script>



-->

{% endblock body %}